{% extends 'base.html.twig' %}
{% block body %}
<script>
    function register(url, registerUrl) {
        const data = JSON.stringify({
            email: document.getElementById('login-email-value').value,
            password: document.getElementById('login-password-value').value,
            first_name: document.getElementById('login-first_name-value').value,
            last_name: document.getElementById('login-last_name-value').value,
            birthday: document.getElementById('login-birthday-value').value,
            patronymic: document.getElementById('login-patronymic-value').value,
            photo: document.getElementById('login-photo-value').value,
            telephone: document.getElementById('login-telephone-value').value,
        });
        const xhr = new XMLHttpRequest();
        xhr.open("POST", registerUrl);
        xhr.setRequestHeader("Content-Type", "application/json; charset=UTF-8");
        xhr.onload = () => {
            if (xhr.readyState === 4 && xhr.status === 200) {
                location.href = url;
            } else {
                alert('Создание не удалось');
            }
        };
        xhr.send(data);
    }
</script>
    <div class="login_content">
        <h1 id="welcome_text">Welcome</h1>
        <form action="" method="post" class="login-form">
            <div>
                <input id="login-first_name-value" class="login-input" placeholder="First Name" type="text" name="first_name" required />
            </div>
            <div>
                <input id="login-last_name-value" class="login-input" placeholder="Last Name" type="text" name="last_name" required />
            </div>
            <div>
                <input id="login-birthday-value" class="login-input" placeholder="birthday" type="date" name="birthday" required />
            </div>
            <div>
                <input id="login-patronymic-value" class="login-input" placeholder="patronymic" type="text" name="patronymic" />
            </div>
            <div>
                <input id="login-email-value" class="login-input" placeholder="Email" type="email" name="email" required />
            </div>
            <div>
                <input id="login-password-value" class="login-input" placeholder="Password" type="password" name="password" required />
            </div>
            <div>
                <input id="login-photo-value" class="login-input" placeholder="photo" type="file" name="photo" />
            </div>
            <div>
                <input id="login-telephone-value" class="login-input" placeholder="telephone" type="text" name="telephone" required />
            </div>
            <div>
                <input class="login-submit" type="submit" value="register" onclick="register('{{ loginPage }}', '{{ registerUrl }}')"/>
            </div>
        </form>
    </div>
{% endblock %}